<div class="post-header">
    <h2>Escape Room</h2>
    <h4>üößEn construcci√≥nüöß</h4>
</div>

<style>
.code-container {
  text-align: center;
  padding: 20px;
}

.code-inputs {
  display: flex;
  justify-content: center;
  gap: 15px;
  margin: 20px 0;
}

.code-input {
  width: 60px;
  height: 80px;
  border: 3px solid #666;
  border-radius: 12px;
  text-align: center;
  font-size: 40px;
  font-weight: bold;
  text-transform: uppercase;
  background: #f8f8f8;
}

#checkButton {
  padding: 12px 40px;
  font-size: 20px;
  background-color: #00C851;
  color: white;
  border: none;
  border-radius: 8px;
  cursor: pointer;
  transition: all 0.3s;
}

.code-input.success { border-color: #00C851 !important; }
.code-input.error { border-color: #ff4444 !important; }
</style>

<div class="post-content">
    <p id="storyText">amanece y la anciana quiere ir al huerTo a por un Higo. intenta abrir la puerta, pero en vez de llave Tiene un c√≥digo, y no lo recuerda.</p>
</div>

<div class="code-container">
  <div class="code-inputs">
    <input type="text" class="code-input" id="input1" maxlength="1">
    <input type="text" class="code-input" id="input2" maxlength="1">
    <input type="text" class="code-input" id="input3" maxlength="1">
  </div>
  <button id="checkButton">Abrir puerta</button>
</div>

<script>
// ========== C√ìDIGO VERIFICADO ==========
const escapeRoom = {
  solution: 'THT',
  init() {
    this.inputs = [...document.querySelectorAll('.code-input')];
    this.btn = document.getElementById('checkButton');
    
    // Configurar eventos de entrada
    this.inputs.forEach((input, index) => {
      input.value = ''; // Reset inicial
      input.addEventListener('input', (e) => this.handleInput(e, index));
    });
    
    // Evento del bot√≥n
    this.btn.addEventListener('click', () => this.checkCode());
  },

  handleInput(e, index) {
    const input = e.target;
    // Filtrado y formato
    input.value = input.value.toUpperCase().replace(/[^A-Z]/g, '');
    
    // Navegaci√≥n autom√°tica garantizada
    if(input.value.length === 1 && index < 2) {
      this.inputs[index + 1].focus();
    }
    if(input.value === '' && index > 0) {
      this.inputs[index - 1].focus();
    }
  },

  checkCode() {
    const code = this.inputs.map(i => i.value).join('');
    
    if(code === this.solution) {
      this.showSuccess();
      setTimeout(() => this.nextLevel(), 1500);
      return true;
    }
    
    this.showError();
    return false;
  },

  showSuccess() {
    this.inputs.forEach(i => i.classList.add('success'));
    this.btn.textContent = '¬°√âxito!';
    this.btn.style.backgroundColor = '#007E33';
  },

  showError() {
    this.inputs.forEach(i => {
      i.classList.add('error');
      setTimeout(() => i.classList.remove('error'), 1000);
    });
  },

  nextLevel() {
    document.getElementById('storyText').innerHTML = `
      ¬°Puerta abierta! <br>
      <em>Segundo puzzle:</em> Encuentras un cofre con s√≠mbolos: ‚ØÅ‚ô£‚ò¢<br>
      <strong>Pista:</strong> "Las iniciales de Tres Hijos del Tendero"
    `;
    document.querySelector('.code-container').innerHTML = `
      <div style="margin-top: 30px; font-size: 1.2em">
        <button onclick="location.reload()" 
                style="padding: 10px 20px; font-size: 16px; margin-top: 20px">
          Reiniciar Juego
        </button>
      </div>
    `;
  }
};

// Iniciar cuando el DOM est√© listo
document.addEventListener('DOMContentLoaded', () => escapeRoom.init());
</script>

<div class="post-footer">
    <a href="../tantoshigostanto/glosario.html#trendy" class="read-more">Explicaci√≥n del recurso ‚Üí</a>
</div>
